(function(t){function e(e){for(var r,a,o=e[0],c=e[1],u=e[2],l=0,d=[];l<o.length;l++)a=o[l],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&d.push(i[a][0]),i[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);p&&p(e);while(d.length)d.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],r=!0,a=1;a<n.length;a++){var o=n[a];0!==i[o]&&(r=!1)}r&&(s.splice(e--,1),t=c(c.s=n[0]))}return t}var r={},a={app:0},i={app:0},s=[];function o(t){return c.p+"js/"+({admin:"admin",learn:"learn",login:"login",read:"read",reading:"reading",test:"test",word:"word",www:"www"}[t]||t)+"."+{admin:"a709c90a",learn:"9516b7d9",login:"7e1236fd",read:"445239d9",reading:"3ad6328e",test:"df7364bc",word:"93bbe6ec",www:"8e2d52aa"}[t]+".js"}function c(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(t){var e=[],n={admin:1,learn:1,login:1,read:1,test:1,word:1,www:1};a[t]?e.push(a[t]):0!==a[t]&&n[t]&&e.push(a[t]=new Promise((function(e,n){for(var r="css/"+({admin:"admin",learn:"learn",login:"login",read:"read",reading:"reading",test:"test",word:"word",www:"www"}[t]||t)+"."+{admin:"d1aa9ec9",learn:"90551431",login:"688f5403",read:"23cc4378",reading:"31d6cfe0",test:"b28b8b50",word:"7f30ca37",www:"073d0b38"}[t]+".css",i=c.p+r,s=document.getElementsByTagName("link"),o=0;o<s.length;o++){var u=s[o],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===i))return e()}var d=document.getElementsByTagName("style");for(o=0;o<d.length;o++){u=d[o],l=u.getAttribute("data-href");if(l===r||l===i)return e()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=e,p.onerror=function(e){var r=e&&e.target&&e.target.src||i,s=new Error("Loading CSS chunk "+t+" failed.\n("+r+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=r,delete a[t],p.parentNode.removeChild(p),n(s)},p.href=i;var f=document.getElementsByTagName("head")[0];f.appendChild(p)})).then((function(){a[t]=0})));var r=i[t];if(0!==r)if(r)e.push(r[2]);else{var s=new Promise((function(e,n){r=i[t]=[e,n]}));e.push(r[2]=s);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=o(t);var d=new Error;u=function(e){l.onerror=l.onload=null,clearTimeout(p);var n=i[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+r+": "+a+")",d.name="ChunkLoadError",d.type=r,d.request=a,n[1](d)}i[t]=void 0}};var p=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(e)},c.m=t,c.c=r,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)c.d(n,r,function(e){return t[e]}.bind(null,r));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="",c.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var d=0;d<u.length;d++)e(u[d]);var p=l;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("85ec")},1788:function(t,e,n){t.exports=n.p+"img/parts_04.66777bdb.png"},"22d3":function(t,e,n){t.exports=n.p+"img/parts_06.7fd6f5ce.png"},"2c69":function(t,e,n){t.exports=n.p+"img/oni.6dad1565.png"},"39be":function(t,e,n){t.exports=n.p+"img/parts_01.468b158b.png"},"3acf":function(t,e,n){t.exports=n.p+"img/parts_03.b636989f.png"},5527:function(t,e,n){t.exports=n.p+"img/daruma.88f48fac.png"},"56d7":function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"login",(function(){return P})),n.d(r,"logout",(function(){return A})),n.d(r,"getInfo",(function(){return L}));var a={};n.r(a),n.d(a,"user",(function(){return R}));var i={};n.r(i),n.d(i,"login",(function(){return $})),n.d(i,"logout",(function(){return I})),n.d(i,"getInfo",(function(){return T})),n.d(i,"extend",(function(){return z}));n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("e792"),n("0cdd");var s=n("2b0e"),o=n("5f5b");n("ab8b"),n("2dd8");s["default"].use(o["b"]);n("d3b7"),n("caad"),n("2532");var c=n("bc3a"),u=n.n(c),l=n("130e"),d=n("3d20"),p=n.n(d),f=(n("4de4"),n("2f62")),m=n("0e44"),g=function(){return{token:"",account:"",role:0,email:"",cart:[]}},h=n("1da1"),v=(n("96cf"),n("3ca3"),n("ddb0"),n("8c4f")),b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"home"},on:{keyup:function(e){return e.type.indexOf("key")||13===e.keyCode?t.delta(1):null}}},[t._m(0),n("div",{staticClass:"postarea"},[n("div",{staticClass:"posts",style:t.computed_left},t._l(t.works,(function(e,r){return n("div",{key:r,staticClass:"post_box",class:{cur_item:r==t.now_index}},[n("router-link",{attrs:{to:"/learn"}},[n("div",{staticClass:"cover",style:t.bg_css(e.cover)},[n("div",{staticClass:"infos"},[n("h1",[t._v(t._s(e.title))]),n("h5",{staticStyle:{"font-weight":"600"}},[t._v(t._s(e.description))])])])])],1)})),0)]),n("div",{staticClass:"control_left",on:{click:function(e){return t.delta(-1)}}},[n("font-awesome-icon",{attrs:{icon:"angle-left"}})],1),n("div",{staticClass:"control_right",on:{click:function(e){return t.delta(1)}}},[n("font-awesome-icon",{attrs:{icon:"angle-right"}})],1)])},_=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"top-up"}},[r("a",{staticClass:"logo",attrs:{href:""}},[r("img",{attrs:{src:n("f186"),alt:"",width:"120px",height:"85px"}})])])}],w=[{title:"N5",description:"能讀懂平、片假名",cover:n("f432")},{title:"N4",description:"能理解基礎日語",cover:n("bebe")},{title:"N3",description:"大致理解日常生活用語",cover:n("a846")},{title:"N2",description:"能讀懂報紙、雜誌等文章",cover:n("e554")},{title:"N1",description:"能理解較複雜、抽象的文章",cover:n("2c69")}],x={name:"home",data:function(){return{works:w,now_index:0,span_width:930}},computed:{computed_left:function(){var t={left:-this.now_index*this.span_width+"px"};return t}},methods:{delta:function(t){this.now_index=(this.now_index+t+this.works.length)%this.works.length},bg_css:function(t){return{"background-image":"url("+t+")"}}}},k=x,y=(n("cccb"),n("2877")),C=Object(y["a"])(k,b,_,!1,null,null,null),O=C.exports;s["default"].use(v["a"]);var j=[{path:"/",name:"Home",component:O,meta:{title:"首頁 | もも"}},{path:"/read",name:"Read",component:function(){return n.e("read").then(n.bind(null,"c844"))},meta:{title:"閱讀 | もも"}},{path:"/reading",name:"Reading",component:function(){return n.e("reading").then(n.bind(null,"f540"))},meta:{title:"閱讀 | もも"}},{path:"/login",name:"Login",component:function(){return n.e("login").then(n.bind(null,"a55b"))},meta:{title:"登入＆註冊 | もも"}},{path:"/word",name:"Word",component:function(){return n.e("word").then(n.bind(null,"5918"))},meta:{title:"單字卡 | もも"}},{path:"/learn",name:"Learn",component:function(){return n.e("learn").then(n.bind(null,"41ce"))},meta:{title:"學習 | もも"}},{path:"/test",name:"Test",component:function(){return n.e("test").then(n.bind(null,"78c1"))},meta:{title:"測驗 | もも"}},{path:"/www",name:"Www",component:function(){return n.e("www").then(n.bind(null,"654d"))},meta:{title:"www | もも"}},{path:"/admin",name:"Admin",component:function(){return n.e("admin").then(n.bind(null,"3530"))},children:[{path:"",name:"AdminHome",component:function(){return n.e("admin").then(n.bind(null,"c732"))},meta:{login:!0,admin:!0,title:"管理 | 購物網"}},{path:"products",name:"AdminProducts",component:function(){return n.e("admin").then(n.bind(null,"aa93"))},meta:{login:!0,admin:!0,title:"商品管理 | 購物網"}},{path:"orders",name:"AdminOrders",component:function(){return n.e("admin").then(n.bind(null,"ec5c"))},meta:{login:!0,admin:!0,title:"訂單管理 | 購物網"}}]}],S=new v["a"]({routes:j});S.beforeEach((function(t,e,n){var r=M.getters["user/user"];t.meta.login&&!r.isLogin?n("/login"):t.meta.admin&&!r.isAdmin?n("/"):n()})),S.afterEach((function(t,e){document.title=t.meta.title}));var E=S,P=function(){var t=Object(h["a"])(regeneratorRuntime.mark((function t(e,n){var r,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.prev=1,t.next=4,D.post("/users/login",n);case 4:a=t.sent,i=a.data,r("login",i.result),E.push("/"),p.a.fire({icon:"success",title:"成功",text:"登入成功"}),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),p.a.fire({icon:"error",title:"失敗",text:t.t0.response.data.message});case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e,n){return t.apply(this,arguments)}}(),A=function(){var t=Object(h["a"])(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,r=e.state,t.prev=1,t.next=4,D.delete("/users/logout",{headers:{authorization:"Bearer "+r.token}});case 4:n("logout"),E.push("/"),p.a.fire({icon:"success",title:"成功",text:"登出成功"}),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),p.a.fire({icon:"error",title:"失敗",text:t.t0.response.data.message});case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}(),L=function(){var t=Object(h["a"])(regeneratorRuntime.mark((function t(e){var n,r,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.commit,r=e.state,0!==r.token.length){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,D.get("/users/me",{headers:{authorization:"Bearer "+r.token}});case 6:a=t.sent,i=a.data,n("getInfo",i.result),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](3),n("logout");case 14:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e){return t.apply(this,arguments)}}(),N=n("5530"),R=function(t){return Object(N["a"])({isLogin:t.token.length>0,isAdmin:1===t.role},t)},$=function(t,e){t.token=e.token,t.account=e.account,t.role=e.role,t.email=e.email,t.cart=e.cart},I=function(t,e){t.token="",t.account="",t.role=0,t.email="",t.cart=[]},T=function(t,e){t.account=e.account,t.role=e.role,t.email=e.email,t.cart=e.cart},z=function(t,e){t.token=e},B={namespaced:!0,state:g,actions:r,getters:a,mutations:i};s["default"].use(f["a"]);var M=new f["a"].Store({state:{msg:null},mutations:{getVoices:function(t){t.msg=new SpeechSynthesisUtterance,V().then((function(e){var n=e.filter((function(t){return t.lang.includes("ja-JP")}))[0];t.msg.voice=n}))}},actions:{},modules:{user:B},plugins:[Object(m["a"])({key:"shop",paths:["user.token"]})]});function V(){return new Promise((function(t,e){var n=window.speechSynthesis,r=setInterval((function(){0!==n.getVoices().length&&(t(n.getVoices()),clearInterval(r))}),10)}))}var D=u.a.create({baseURL:"https://nihonngo.herokuapp.com/"});D.interceptors.response.use((function(t){return t}),(function(t){if(t.response){if(401===t.response.status&&"/users/extend"!==t.config.url){var e=t.config;return D.post("/users/extend",{},{headers:{authorization:"Bearer "+M.state.user.token}}).then((function(t){var n=t.data;return M.commit("user/extend",n.result.token),e.headers.authorization="Bearer "+M.state.user.token,u()(e)})).catch((function(t){return M.commit("user/logout"),E.push("/login"),Promise.reject(t)}))}}else"ECONNABORTED"===t.code&&t.message.includes("timeout")?p.a.fire({icon:"error",title:"錯誤",text:"請求逾時"}):p.a.fire({icon:"error",title:"錯誤",text:"網路不穩定"});return Promise.reject(t)})),s["default"].use(l["a"],{axios:u.a,api:D});var H=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("b-list-group",[r("b-avatar",{attrs:{variant:"light",size:"lg",id:"popover-target-1"}}),r("b-popover",{attrs:{target:"popover-target-1",triggers:"hover",placement:"bottom"},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("歡迎光臨!")]},proxy:!0}])},[t.user.isLogin?t._e():r("b-nav-item",{staticStyle:{"font-size":"23px"},attrs:{to:"/login"}},[t._v("🐵 登入 / 註冊")]),t.user.isLogin&&t.user.isAdmin?r("b-nav-item",{staticStyle:{"font-size":"23px","letter-spacing":"5px"},attrs:{to:"/admin"}},[t._v("🐶 管理")]):t._e(),t.user.isLogin?r("b-nav-item",{staticStyle:{"font-size":"23px","letter-spacing":"5px"},on:{click:t.logout}},[t._v("🍑 登出")]):t._e()],1)],1),r("div",{staticClass:"burger"},[r("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.my-sidebar",modifiers:{"my-sidebar":!0}}]},[r("img",{attrs:{src:n("5527"),alt:"",width:"90px",height:"90px"}})])],1),r("b-sidebar",{attrs:{id:"my-sidebar"}},[r("ul",{staticClass:"nav__list"},[r("li",{staticClass:"nav__item"},[r("router-link",{staticClass:"nav__link",attrs:{to:"/learn"}},[t._v("單字")])],1),r("li",{staticClass:"nav__item"},[r("router-link",{staticClass:"nav__link",attrs:{to:"/read"}},[t._v("閱讀")])],1),r("li",{staticClass:"nav__item"},[r("router-link",{staticClass:"nav__link",attrs:{to:"/test"}},[t._v("測驗")])],1),r("li",{staticClass:"nav__item"},[r("router-link",{staticClass:"nav__link",attrs:{to:"/word"}},[t._v("單字卡")])],1),r("li",{staticClass:"nav__item"},[r("router-link",{staticClass:"nav__link",attrs:{to:"/www"}},[t._v("www")])],1)])]),t._m(0),r("router-view")],1)},J=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"sakura_block"}},[r("div",{staticClass:"sakura_parts_box"},[r("img",{staticClass:"parts_01",attrs:{src:n("39be")}}),r("img",{staticClass:"parts_02",attrs:{src:n("c52f")}}),r("img",{staticClass:"parts_03",attrs:{src:n("3acf")}}),r("img",{staticClass:"parts_04",attrs:{src:n("1788")}}),r("img",{staticClass:"parts_05",attrs:{src:n("c02b")}}),r("img",{staticClass:"parts_06",attrs:{src:n("22d3")}}),r("img",{staticClass:"parts_07",attrs:{src:n("df70")}}),r("img",{staticClass:"parts_08",attrs:{src:n("39be")}}),r("img",{staticClass:"parts_09",attrs:{src:n("c52f")}}),r("img",{staticClass:"parts_10",attrs:{src:n("3acf")}}),r("img",{staticClass:"parts_11",attrs:{src:n("1788")}}),r("img",{staticClass:"parts_12",attrs:{src:n("c02b")}}),r("img",{staticClass:"parts_13",attrs:{src:n("22d3")}}),r("img",{staticClass:"parts_14",attrs:{src:n("df70")}}),r("img",{staticClass:"parts_15",attrs:{src:n("39be")}}),r("img",{staticClass:"parts_16",attrs:{src:n("c52f")}}),r("img",{staticClass:"parts_17",attrs:{src:n("3acf")}}),r("img",{staticClass:"parts_18",attrs:{src:n("1788")}}),r("img",{staticClass:"parts_19",attrs:{src:n("c02b")}})])])}],U={computed:{user:function(){return this.$store.getters["user/user"]}},methods:{logout:function(){this.$store.dispatch("user/logout")},login:function(){this.$store.dispatch("user/login")}},created:function(){var t=this;return Object(h["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$store.dispatch("user/getInfo"),t.$store.commit("getVoices");case 2:case"end":return e.stop()}}),e)})))()}},q=U,W=(n("034f"),Object(y["a"])(q,H,J,!1,null,null,null)),F=W.exports,K=n("f9d5"),G=n.n(K),Q=(n("4413"),{computed:{user:function(){return this.$store.getters["user/user"]}}}),X=n("b1e0"),Y=(n("f9e3"),n("ecee")),Z=n("c074"),tt=n("ad3d"),et=n("0a63"),nt=n.n(et),rt=n("0d28"),at=n.n(rt),it=n("657c"),st=(n("2bd9"),n("af52")),ot=n.n(st);s["default"].use(ot.a),s["default"].component("ImgInputer",it["a"]),s["default"].use(at.a),s["default"].use(nt.a),s["default"].component("font-awesome-icon",tt["a"]),Y["c"].add(Z["d"],Z["b"],Z["a"],Z["e"],Z["f"],Z["c"]),s["default"].use(o["a"]),s["default"].use(X["a"]),s["default"].use(G.a),s["default"].mixin(Q),new s["default"]({router:E,store:M,render:function(t){return t(F)}}).$mount("#app")},"5ced":function(t,e,n){},"85ec":function(t,e,n){},a846:function(t,e,n){t.exports=n.p+"img/momotarou.d40f1070.png"},bebe:function(t,e,n){t.exports=n.p+"img/old.ad7bfd8d.png"},c02b:function(t,e,n){t.exports=n.p+"img/parts_05.cbb6a898.png"},c52f:function(t,e,n){t.exports=n.p+"img/parts_02.9e038cde.png"},cccb:function(t,e,n){"use strict";n("5ced")},df70:function(t,e,n){t.exports=n.p+"img/parts_07.5e8b266a.png"},e554:function(t,e,n){t.exports=n.p+"img/shima.78763414.png"},f186:function(t,e,n){t.exports=n.p+"img/momoLogo.874aa7a1.png"},f432:function(t,e,n){t.exports=n.p+"img/peach.00a69ce3.png"}});
//# sourceMappingURL=app.4598ccc9.js.map